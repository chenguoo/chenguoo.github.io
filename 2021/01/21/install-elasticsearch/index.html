<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="install elasticsearch, Cheney 学习日志">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>install elasticsearch | Cheney 学习日志</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 5.2.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Cheney 学习日志</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Cheney 学习日志</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/16.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">install elasticsearch</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/linux/">
                                <span class="chip bg-color">linux</span>
                            </a>
                        
                            <a href="/tags/elasticsearch/">
                                <span class="chip bg-color">elasticsearch</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/elasticsearch/" class="post-category">
                                elasticsearch
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-01-21
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="elasticsearch-6-8安装"><a href="#elasticsearch-6-8安装" class="headerlink" title="elasticsearch 6.8安装"></a>elasticsearch 6.8安装</h2><p><a target="_blank" rel="noopener" href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch">https://www.elastic.co/cn/downloads/past-releases#elasticsearch</a></p>
<p>选择6.8.8版本</p>
<p><a target="_blank" rel="noopener" href="https://www.elastic.co/guide/en/elasticsearch/reference/6.8/zip-targz.html">https://www.elastic.co/guide/en/elasticsearch/reference/6.8/zip-targz.html</a></p>
<p>官方文档，安装说明</p>
<h3 id="1、先安装java"><a href="#1、先安装java" class="headerlink" title="1、先安装java"></a>1、先安装java</h3><p><a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a></p>
<p>选择【Linux x64 RPM Package】</p>
<pre class="line-numbers language-shell"><code class="language-shell">[root@host101 ~]# rpm -ivh jdk-8u251-linux-x64.rpm 
warning: jdk-8u251-linux-x64.rpm: Header V3 RSA/SHA256 Signature, key ID ec551f03: NOKEY
Preparing...                          ################################# [100%]
Updating / installing...
   1:jdk1.8-2000:1.8.0_251-fcs        ################################# [100%]
Unpacking JAR files...
        tools.jar...
        plugin.jar...
        javaws.jar...
        deploy.jar...
        rt.jar...
        jsse.jar...
        charsets.jar...
        localedata.jar...
[root@host101 ~]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2、下载elasticsearch软件，解压到-usr-locl目录下"><a href="#2、下载elasticsearch软件，解压到-usr-locl目录下" class="headerlink" title="2、下载elasticsearch软件，解压到/usr/locl目录下"></a>2、下载elasticsearch软件，解压到/usr/locl目录下</h3><pre class="line-numbers language-shell"><code class="language-shell">[root@host101 ~]# tar xvf elasticsearch-6.8.8.tar.gz -C /usr/local/
[root@host101 ~]# cd /usr/local/
[root@host101 local]# mv elasticsearch-6.8.8/ elasticsearch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="3、运行elasticsearch-开启报错之旅"><a href="#3、运行elasticsearch-开启报错之旅" class="headerlink" title="3、运行elasticsearch,开启报错之旅"></a>3、运行elasticsearch,开启报错之旅</h3><h4 id="3-1-报错：不能以root用户运行"><a href="#3-1-报错：不能以root用户运行" class="headerlink" title="3.1 报错：不能以root用户运行"></a>3.1 报错：不能以root用户运行</h4><pre class="line-numbers language-shell"><code class="language-shell">[root@host101 elasticsearch]# bin/elasticsearch
OpenJDK 64-Bit Server VM warning: If the number of processors is expected to increase from one, then you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads=N
[2020-06-08T07:53:35,386][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [unknown] uncaught exception in thread [main]
org.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root
        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:163) ~[elasticsearch-6.8.8.jar:6.8.8]
        at org.elasticsearch.bootstrap.Elasticsearch.execute(Elasticsearch.java:150) ~[elasticsearch-6.8.8.jar:6.8.8]
        at org.elasticsearch.cli.EnvironmentAwareCommand.execute(EnvironmentAwareCommand.java:86) ~[elasticsearch-6.8.8.jar:6.8.8]
        at org.elasticsearch.cli.Command.mainWithoutErrorHandling(Command.java:124) ~[elasticsearch-cli-6.8.8.jar:6.8.8]
        at org.elasticsearch.cli.Command.main(Command.java:90) ~[elasticsearch-cli-6.8.8.jar:6.8.8]
        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:116) ~[elasticsearch-6.8.8.jar:6.8.8]
        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:93) ~[elasticsearch-6.8.8.jar:6.8.8]
Caused by: java.lang.RuntimeException: can not run elasticsearch as root
        at org.elasticsearch.bootstrap.Bootstrap.initializeNatives(Bootstrap.java:103) ~[elasticsearch-6.8.8.jar:6.8.8]
        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:170) ~[elasticsearch-6.8.8.jar:6.8.8]
        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:333) ~[elasticsearch-6.8.8.jar:6.8.8]
        at org.elasticsearch.bootstrap.Elasticsearch.init(Elasticsearch.java:159) ~[elasticsearch-6.8.8.jar:6.8.8]
        ... 6 more<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解决方法：</p>
<p>添加其它用户，我新加了一个es用户，将elasticsearch目录授予es用户,启动成功。</p>
<pre class="line-numbers language-shell"><code class="language-shell">[root@host101 elasticsearch]# useradd es
[root@host101 elasticsearch]# chown -R es:es /usr/local/elasticsearch/
[root@host101 elasticsearch]#su - es
[es@host101 elasticsearch]$ bin/elasticsearch
OpenJDK 64-Bit Server VM warning: If the number of processors is expected to increase from one, then you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads=N
[2020-06-08T08:03:17,900][INFO ][o.e.e.NodeEnvironment ] [5Viw2iF] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [7.8gb], net total_space [16.9gb], types [rootfs]
[2020-06-08T08:03:17,904][INFO ][o.e.e.NodeEnvironment ] [5Viw2iF] heap size [1015.6mb], compressed ordinary object pointers [true]
[2020-06-08T08:03:17,906][INFO ][o.e.n.Node ] [5Viw2iF] node name derived from node ID [5Viw2iFFSraid8DsATRv0Q]; set [node.name] to override
[2020-06-08T08:03:17,906][INFO ][o.e.n.Node ] [5Viw2iF] version[6.8.8], pid[26327], build[default/tar/2f4c224/2020-03-18T23:22:18.622755Z], OS[Linux/3.10.0-957.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_181/25.181-b13]
......

......
[2020-06-08T08:03:50,821][INFO ][o.e.c.s.MasterService ] [5Viw2iF] zen-disco-elected-as-master ([0] nodes joined), reason: new_master {5Viw2iF}{5Viw2iFFSraid8DsATRv0Q}{4P_TXjOBTWmK_kV3Xm88bA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=1907941376, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true}
[2020-06-08T08:03:50,849][INFO ][o.e.c.s.ClusterApplierService] [5Viw2iF] new_master {5Viw2iF}{5Viw2iFFSraid8DsATRv0Q}{4P_TXjOBTWmK_kV3Xm88bA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=1907941376, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true}, reason: apply cluster state (from master [master {5Viw2iF}{5Viw2iFFSraid8DsATRv0Q}{4P_TXjOBTWmK_kV3Xm88bA}{127.0.0.1}{127.0.0.1:9300}{ml.machine_memory=1907941376, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true} committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)]])
[2020-06-08T08:03:51,221][INFO ][o.e.h.n.Netty4HttpServerTransport] [5Viw2iF] publish_address {127.0.0.1:9200}, bound_addresses {[::1]:9200}, {127.0.0.1:9200}
[2020-06-08T08:03:51,222][INFO ][o.e.n.Node ] [5Viw2iF] started
[2020-06-08T08:03:51,949][WARN ][o.e.x.s.a.s.m.NativeRoleMappingStore] [5Viw2iF] Failed to clear cache for realms [[]]
[2020-06-08T08:03:52,106][INFO ][o.e.l.LicenseService ] [5Viw2iF] license [25b1507f-4db2-4bdb-9f72-bf19ed92defe] mode [basic] - valid
[2020-06-08T08:03:52,123][INFO ][o.e.g.GatewayService ] [5Viw2iF] recovered [0] indices into cluster_state<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="3-2-其它IP访问不到ES数据库"><a href="#3-2-其它IP访问不到ES数据库" class="headerlink" title="3.2 其它IP访问不到ES数据库"></a>3.2 其它IP访问不到ES数据库</h4><p>但默认监控的是127.0.0.1端口，其它IP访问不到ES数据库，需要修改为本机Ip 192.168.150.101</p>
<pre class="line-numbers language-shell"><code class="language-shell">[root@host101 config]# cd /usr/local/elasticsearch/config/
[root@host101 config]# vi elasticsearch.yml 
修改这个参数
network.host: 192.168.150.101
保存！<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="3-3-重启数据库，报错"><a href="#3-3-重启数据库，报错" class="headerlink" title="3.3 重启数据库，报错"></a>3.3 重启数据库，报错</h4><pre class="line-numbers language-shell"><code class="language-shell">[es@host101 elasticsearch]$ bin/elasticsearch
OpenJDK 64-Bit Server VM warning: If the number of processors is expected to increase from one, then you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads=N
[2020-06-08T08:08:16,804][INFO ][o.e.e.NodeEnvironment    ] [5Viw2iF] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [7.5gb], net total_space [16.9gb], types [rootfs]
[2020-06-08T08:08:16,823][INFO ][o.e.e.NodeEnvironment    ] [5Viw2iF] heap size [1015.6mb], compressed ordinary object pointers [true]
[2020-06-08T08:08:16,825][INFO ][o.e.n.Node               ] [5Viw2iF] node name derived from node ID [5Viw2iFFSraid8DsATRv0Q]; set [node.name] to override
[2020-06-08T08:08:16,826][INFO ][o.e.n.Node               ] [5Viw2iF] version[6.8.8], pid[27460], build[default/tar/2f4c224/2020-03-18T23:22:18.622755Z], OS[Linux/3.10.0-957.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_181/25.181-b13]
[2020-06-08T08:08:16,826][INFO ][o.e.n.Node               ] [5Viw2iF] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch-2400007459533475276, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.path.home=/usr/local/elasticsearch, -Des.path.conf=/usr/local/elasticsearch/config, -Des.distribution.flavor=default, -Des.distribution.type=tar]
............
[2020-06-08T08:08:54,664][INFO ][o.e.n.Node               ] [5Viw2iF] initialized
[2020-06-08T08:08:54,665][INFO ][o.e.n.Node               ] [5Viw2iF] starting ...
[2020-06-08T08:08:55,458][INFO ][o.e.t.TransportService   ] [5Viw2iF] publish_address {192.168.150.101:9300}, bound_addresses {192.168.150.101:9300}
[2020-06-08T08:08:55,548][INFO ][o.e.b.BootstrapChecks    ] [5Viw2iF] bound or publishing to a non-loopback address, enforcing bootstrap checks
ERROR: [2] bootstrap checks failed
[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]
[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]
[2020-06-08T08:08:55,728][INFO ][o.e.n.Node               ] [5Viw2iF] stopping ...
[2020-06-08T08:08:55,804][INFO ][o.e.n.Node               ] [5Viw2iF] stopped
[2020-06-08T08:08:55,804][INFO ][o.e.n.Node               ] [5Viw2iF] closing ...
[2020-06-08T08:08:55,865][INFO ][o.e.n.Node               ] [5Viw2iF] closed
[2020-06-08T08:08:55,869][INFO ][o.e.x.m.p.NativeController] [5Viw2iF] Native controller process has stopped - no new native processes can be started
[es@host101 elasticsearch]$<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解决方法：</p>
<p>需要使用root用户去修改</p>
<p>[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]</p>
<pre class="line-numbers language-shell"><code class="language-shell">[root@host101 config]# vi /etc/security/limits.conf
加入:
* soft nofile 65536
* hard nofile 65536
保存！<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>[2]: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</p>
<pre class="line-numbers language-shell"><code class="language-shell">[root@host101 config]# vi /etc/sysctl.conf
加入
vm.max_map_count=262144
保存！
[root@host101 config]# sysctl -p
vm.max_map_count = 262144
[root@host101 config]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="3-4-再次启动数据库，报错"><a href="#3-4-再次启动数据库，报错" class="headerlink" title="3.4 再次启动数据库，报错"></a>3.4 再次启动数据库，报错</h4><pre class="line-numbers language-shell"><code class="language-shell">[es@host101 elasticsearch]$ bin/elasticsearch
OpenJDK 64-Bit Server VM warning: If the number of processors is expected to increase from one, then you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads=N
[2020-06-08T08:15:41,388][INFO ][o.e.e.NodeEnvironment    ] [5Viw2iF] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [7.4gb], net total_space [16.9gb], types [rootfs]
[2020-06-08T08:15:41,406][INFO ][o.e.e.NodeEnvironment    ] [5Viw2iF] heap size [1015.6mb], compressed ordinary object pointers [true]
[2020-06-08T08:15:41,409][INFO ][o.e.n.Node               ] [5Viw2iF] node name derived from node ID [5Viw2iFFSraid8DsATRv0Q]; set [node.name] to override
[2020-06-08T08:15:41,409][INFO ][o.e.n.Node               ] [5Viw2iF] version[6.8.8], pid[28441], build[default/tar/2f4c224/2020-03-18T23:22:18.622755Z], OS[Linux/3.10.0-957.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_181/25.181-b13]
[2020-06-08T08:15:41,410][INFO ][o.e.n.Node               ] [5Viw2iF] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch-3859837246303122342, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.path.home=/usr/local/elasticsearch, -Des.path.conf=/usr/local/elasticsearch/config, -Des.distribution.flavor=default, -Des.distribution.type=tar]
............
[2020-06-08T08:16:13,493][INFO ][o.e.n.Node               ] [5Viw2iF] starting ...
[2020-06-08T08:16:13,960][INFO ][o.e.t.TransportService   ] [5Viw2iF] publish_address {192.168.150.101:9300}, bound_addresses {192.168.150.101:9300}
[2020-06-08T08:16:14,078][INFO ][o.e.b.BootstrapChecks    ] [5Viw2iF] bound or publishing to a non-loopback address, enforcing bootstrap checks
ERROR: [1] bootstrap checks failed
[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]
[2020-06-08T08:16:14,170][INFO ][o.e.n.Node               ] [5Viw2iF] stopping ...
[2020-06-08T08:16:14,212][INFO ][o.e.n.Node               ] [5Viw2iF] stopped
[2020-06-08T08:16:14,213][INFO ][o.e.n.Node               ] [5Viw2iF] closing ...
[2020-06-08T08:16:14,273][INFO ][o.e.n.Node               ] [5Viw2iF] closed
[2020-06-08T08:16:14,276][INFO ][o.e.x.m.p.NativeController] [5Viw2iF] Native controller process has stopped - no new native processes can be started
[es@host101 elasticsearch]$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>解决方法：</p>
<p>这个报错刚才不是已经修复了么？ 怎么还报这个错误，因为没生效，退出es用户，再重新登录es用户，启动数据库就OK了</p>
<pre class="line-numbers language-shell"><code class="language-shell">[es@host101 elasticsearch]$   exit
logout
[root@host101 elasticsearch]# su - es
Last login: Mon Jun  8 07:56:20 CST 2020 on pts/0[es@host101 ~]$ cd /usr/local/elasticsearch/
[es@host101 elasticsearch]$ bin/elasticsearch
OpenJDK 64-Bit Server VM warning: If the number of processors is expected to increase from one, then you should configure the number of parallel GC threads appropriately using -XX:ParallelGCThreads=N
[2020-06-08T08:18:13,096][INFO ][o.e.e.NodeEnvironment    ] [5Viw2iF] using [1] data paths, mounts [[/ (rootfs)]], net usable_space [7.4gb], net total_space [16.9gb], types [rootfs]
[2020-06-08T08:18:13,102][INFO ][o.e.e.NodeEnvironment    ] [5Viw2iF] heap size [1015.6mb], compressed ordinary object pointers [true]
[2020-06-08T08:18:13,119][INFO ][o.e.n.Node               ] [5Viw2iF] node name derived from node ID [5Viw2iFFSraid8DsATRv0Q]; set [node.name] to override
[2020-06-08T08:18:13,119][INFO ][o.e.n.Node               ] [5Viw2iF] version[6.8.8], pid[28711], build[default/tar/2f4c224/2020-03-18T23:22:18.622755Z], OS[Linux/3.10.0-957.el7.x86_64/amd64], JVM[Oracle Corporation/OpenJDK 64-Bit Server VM/1.8.0_181/25.181-b13]
[2020-06-08T08:18:13,120][INFO ][o.e.n.Node               ] [5Viw2iF] JVM arguments [-Xms1g, -Xmx1g, -XX:+UseConcMarkSweepGC, -XX:CMSInitiatingOccupancyFraction=75, -XX:+UseCMSInitiatingOccupancyOnly, -Des.networkaddress.cache.ttl=60, -Des.networkaddress.cache.negative.ttl=10, -XX:+AlwaysPreTouch, -Xss1m, -Djava.awt.headless=true, -Dfile.encoding=UTF-8, -Djna.nosys=true, -XX:-OmitStackTraceInFastThrow, -Dio.netty.noUnsafe=true, -Dio.netty.noKeySetOptimization=true, -Dio.netty.recycler.maxCapacityPerThread=0, -Dlog4j.shutdownHookEnabled=false, -Dlog4j2.disable.jmx=true, -Djava.io.tmpdir=/tmp/elasticsearch-7764616055026205076, -XX:+HeapDumpOnOutOfMemoryError, -XX:HeapDumpPath=data, -XX:ErrorFile=logs/hs_err_pid%p.log, -XX:+PrintGCDetails, -XX:+PrintGCDateStamps, -XX:+PrintTenuringDistribution, -XX:+PrintGCApplicationStoppedTime, -Xloggc:logs/gc.log, -XX:+UseGCLogFileRotation, -XX:NumberOfGCLogFiles=32, -XX:GCLogFileSize=64m, -Des.path.home=/usr/local/elasticsearch, -Des.path.conf=/usr/local/elasticsearch/config, -Des.distribution.flavor=default, -Des.distribution.type=tar]
[2020-06-08T08:18:22,569][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [aggs-matrix-stats]
[2020-06-08T08:18:22,569][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [analysis-common]
[2020-06-08T08:18:22,569][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [ingest-common]
[2020-06-08T08:18:22,569][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [ingest-geoip]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [ingest-user-agent]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [lang-expression]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [lang-mustache]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [lang-painless]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [mapper-extras]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [parent-join]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [percolator]
[2020-06-08T08:18:22,570][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [rank-eval]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [reindex]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [repository-url]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [transport-netty4]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [tribe]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-ccr]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-core]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-deprecation]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-graph]
[2020-06-08T08:18:22,571][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-ilm]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-logstash]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-ml]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-monitoring]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-rollup]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-security]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-sql]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-upgrade]
[2020-06-08T08:18:22,572][INFO ][o.e.p.PluginsService     ] [5Viw2iF] loaded module [x-pack-watcher]
[2020-06-08T08:18:22,573][INFO ][o.e.p.PluginsService     ] [5Viw2iF] no plugins loaded
[2020-06-08T08:18:35,564][INFO ][o.e.x.s.a.s.FileRolesStore] [5Viw2iF] parsed [0] roles from file [/usr/local/elasticsearch/config/roles.yml]
[2020-06-08T08:18:37,435][INFO ][o.e.x.m.p.l.CppLogMessageHandler] [5Viw2iF] [controller/28769] [Main.cc@109] controller (64 bit): Version 6.8.8 (Build 398321ce7838fd) Copyright (c) 2020 Elasticsearch BV
[2020-06-08T08:18:39,447][DEBUG][o.e.a.ActionModule       ] [5Viw2iF] Using REST wrapper from plugin org.elasticsearch.xpack.security.Security
[2020-06-08T08:18:40,072][INFO ][o.e.d.DiscoveryModule    ] [5Viw2iF] using discovery type [zen] and host providers [settings]
[2020-06-08T08:18:43,133][INFO ][o.e.n.Node               ] [5Viw2iF] initialized
[2020-06-08T08:18:43,134][INFO ][o.e.n.Node               ] [5Viw2iF] starting ...
[2020-06-08T08:18:43,835][INFO ][o.e.t.TransportService   ] [5Viw2iF] publish_address {192.168.150.101:9300}, bound_addresses {192.168.150.101:9300}
[2020-06-08T08:18:43,916][INFO ][o.e.b.BootstrapChecks    ] [5Viw2iF] bound or publishing to a non-loopback address, enforcing bootstrap checks
[2020-06-08T08:18:47,216][INFO ][o.e.c.s.MasterService    ] [5Viw2iF] zen-disco-elected-as-master ([0] nodes joined), reason: new_master {5Viw2iF}{5Viw2iFFSraid8DsATRv0Q}{c6ZTtwwQQ1eGMmDmW6BvbA}{192.168.150.101}{192.168.150.101:9300}{ml.machine_memory=1907941376, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true}
[2020-06-08T08:18:47,235][INFO ][o.e.c.s.ClusterApplierService] [5Viw2iF] new_master {5Viw2iF}{5Viw2iFFSraid8DsATRv0Q}{c6ZTtwwQQ1eGMmDmW6BvbA}{192.168.150.101}{192.168.150.101:9300}{ml.machine_memory=1907941376, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true}, reason: apply cluster state (from master [master {5Viw2iF}{5Viw2iFFSraid8DsATRv0Q}{c6ZTtwwQQ1eGMmDmW6BvbA}{192.168.150.101}{192.168.150.101:9300}{ml.machine_memory=1907941376, xpack.installed=true, ml.max_open_jobs=20, ml.enabled=true} committed version [1] source [zen-disco-elected-as-master ([0] nodes joined)]])
[2020-06-08T08:18:47,607][INFO ][o.e.h.n.Netty4HttpServerTransport] [5Viw2iF] publish_address {192.168.150.101:9200}, bound_addresses {192.168.150.101:9200}
[2020-06-08T08:18:47,608][INFO ][o.e.n.Node               ] [5Viw2iF] started
[2020-06-08T08:18:48,134][WARN ][o.e.x.s.a.s.m.NativeRoleMappingStore] [5Viw2iF] Failed to clear cache for realms [[]]
[2020-06-08T08:18:48,371][INFO ][o.e.l.LicenseService     ] [5Viw2iF] license [25b1507f-4db2-4bdb-9f72-bf19ed92defe] mode [basic] - valid
[2020-06-08T08:18:48,434][INFO ][o.e.g.GatewayService     ] [5Viw2iF] recovered [0] indices into cluster_state<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>使用curl命令测试一下，或在浏览器中输入 <a target="_blank" rel="noopener" href="http://192.168.150.101:9200/">http://192.168.150.101:9200/</a> 也会返回相同的信息，单节点安装完成。</p>
<pre class="line-numbers language-shell"><code class="language-shell">[root@host101 config]# curl http://192.168.150.101:9200/
{
  "name" : "5Viw2iF",
  "cluster_name" : "elasticsearch",
  "cluster_uuid" : "IKcwVC2QSZyoMuq0CKC7cA",
  "version" : {
    "number" : "6.8.8",
    "build_flavor" : "default",
    "build_type" : "tar",
    "build_hash" : "2f4c224",
    "build_date" : "2020-03-18T23:22:18.622755Z",
    "build_snapshot" : false,
    "lucene_version" : "7.7.2",
    "minimum_wire_compatibility_version" : "5.6.0",
    "minimum_index_compatibility_version" : "5.0.0"
  },
  "tagline" : "You Know, for Search"
}
[root@host101 config]# <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="3-5-设置es开机自启动"><a href="#3-5-设置es开机自启动" class="headerlink" title="3.5 设置es开机自启动"></a>3.5 设置es开机自启动</h4><pre class="line-numbers language-shell"><code class="language-shell">创建es 的系统启动服务文件，进入到 cd /etc/init.d 目录；
cd /etc/init.d    　　【进入到目录】
vi elasticsearch 　　 【创建es系统启动服务文件】
编写启动脚本:
#!/bin/bash
#chkconfig: 345 63 37
#description: elasticsearch
#processname: elasticsearch

export ES_HOME=/opt/es/

case $1 in
        start)
                su es<<!
                cd $ES_HOME
                ./bin/elasticsearch -d -p pid
                exit
!
                echo "elasticsearch is started"
                ;;
        stop)
                pid=`cat $ES_HOME/pid`
                kill -9 $pid
                echo "elasticsearch is stopped"
                ;;
        restart)
                pid=`cat $ES_HOME/pid`
                kill -9 $pid
                echo "elasticsearch is stopped"
                sleep 1
                su es<<!
                cd $ES_HOME
                ./bin/elasticsearch -d -p pid
                exit
!
                echo "elasticsearch is started"
        ;;
    *)
        echo "start|stop|restart"
        ;;  
esac
exit 0

#保存退出
#修改文件权限:
chmod 777 elasticsearch
#添加和删除服务并设置启动方式:
chkconfig --add elasticsearch　　　　#【添加系统服务】
chkconfig --del elasticsearch　　　　#【删除系统服务】
#若是在国产操作系统UOS或者Ubuntu上设置服务，可以使用
systemctl enable elasticsearch     #【添加服务】
systemctl disable elasticsearch    #【删除服务】
#关闭和启动服务:
service elasticsearch start　　　　　#【启动】
service elasticsearch stop　　　　　 #【停止】
#或者：
systemctl start elasticsearch
systemctl stop elasticsearch
service elasticsearch restart　　   #【重启】
#设置服务是否开机启动：
chkconfig elasticsearch on　　　　　　#【开启】
chkconfig elasticsearch off　　   　 #【关闭】
________________________________________
验证是否已启动命令：
复制代码
ps -ef | grep elasticsearch    #【查看是否有es的进程】
结束进程命令用 kill -9 进程ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4、安装Kibana"><a href="#4、安装Kibana" class="headerlink" title="4、安装Kibana"></a>4、安装Kibana</h3><h4 id="4-1下载解压："><a href="#4-1下载解压：" class="headerlink" title="4.1下载解压："></a>4.1下载解压：</h4><p>将kibana-6.8.8-linux-x86_64上传至/usr/local/下，解压</p>
<pre class="line-numbers language-shell"><code class="language-shell">tar -zxvf kibana-6.8.8-linux-x86_64.tar.gz
mv kibana-6.8.8-linux-x86_64 kibana<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="4-2-编辑kibana配置"><a href="#4-2-编辑kibana配置" class="headerlink" title="4.2 编辑kibana配置"></a>4.2 编辑kibana配置</h4><pre class="line-numbers language-shell"><code class="language-shell">vi /usr/local/kibana/config/kibana.yml

# Kibana is served by a back end server. This setting specifies the port to use.
#server.port: 5601

# Specifies the address to which the Kibana server will bind. IP addresses and host names are both valid values.
# The default is 'localhost', which usually means remote machines will not be able to connect.
# To allow connections from remote users, set this parameter to a non-loopback address.
server.host: "192.168.244.129"

# Enables you to specify a path to mount Kibana at if you are running behind a proxy.
# Use the `server.rewriteBasePath` setting to tell Kibana if it should remove the basePath
# from requests it receives, and to prevent a deprecation warning at startup.
# This setting cannot end in a slash.
#server.basePath: ""

# Specifies whether Kibana should rewrite requests that are prefixed with
# `server.basePath` or require that they are rewritten by your reverse proxy.
# This setting was effectively always `false` before Kibana 6.3 and will
# default to `true` starting in Kibana 7.0.
#server.rewriteBasePath: false

# The maximum payload size in bytes for incoming server requests.
#server.maxPayloadBytes: 1048576

# The Kibana server's name.  This is used for display purposes.
#server.name: "your-hostname"

# The URLs of the Elasticsearch instances to use for all your queries.
elasticsearch.hosts: ["http://192.168.244.129:9200"]

# When this setting's value is true Kibana uses the hostname specified in the server.host
# setting. When the value of this setting is false, Kibana uses the hostname of the host
# that connects to this Kibana instance.
#elasticsearch.preserveHost: true

# Kibana uses an index in Elasticsearch to store saved searches, visualizations and
# dashboards. Kibana creates a new index if the index doesn't already exist.
#kibana.index: ".kibana"

# The default application to load.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="4-3-启动kibana"><a href="#4-3-启动kibana" class="headerlink" title="4.3 启动kibana"></a>4.3 启动kibana</h4><pre class="line-numbers language-shell"><code class="language-shell">cd /usr/local/kibana/bin/

./kibana浏览器地访问http://192.168.244.xx:5601看到如下界面即成功<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p><img src="https://img2020.cnblogs.com/blog/1688934/202004/1688934-20200412224034576-1166938185.png" alt="img"></p>
<h4 id="4-4-设置kibana开机自启动"><a href="#4-4-设置kibana开机自启动" class="headerlink" title="4.4 设置kibana开机自启动"></a>4.4 设置kibana开机自启动</h4><pre class="line-numbers language-shell"><code class="language-shell">  cd /etc/init.d
  touch kibana
  chmod +x kibana
  vi kibana并输入以下内容:
#!/bin/bash
# chkconfig:   345 98 02
# description:  kibana

KIBANA_HOME=/usr/local/kibana
case $1 in
        start) $KIBANA_HOME/bin/kibana &;;
        *) echo "kibana is start";;
esac

#保存退出
#修改文件权限:
chmod 777 kibana
#添加和删除服务并设置启动方式:
chkconfig --add kibana　　　　#【添加系统服务】
chkconfig --del kibana　　　　#【删除系统服务】
#关闭和启动服务:
service elasticsearch start　　　　　#【启动】
service elasticsearch stop　　　　　 #【停止】
service elasticsearch restart　　   #【重启】
#设置服务是否开机启动：
chkconfig kibana on　　　　　　#【开启】
chkconfig kibana off　　   　 #【关闭】<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Cheney</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://chenguoo.github.io/2021/01/21/install-elasticsearch/">https://chenguoo.github.io/2021/01/21/install-elasticsearch/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">Cheney</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/linux/">
                                    <span class="chip bg-color">linux</span>
                                </a>
                            
                                <a href="/tags/elasticsearch/">
                                    <span class="chip bg-color">elasticsearch</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
        </div>
    </div>

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/01/21/install-nginx-rtmp-ffmpeg/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="Nginx+rtmp+ffmpeg搭建流媒体服务器">
                        
                        <span class="card-title">Nginx+rtmp+ffmpeg搭建流媒体服务器</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Nginx+rtmp+ffmpeg搭建流媒体服务器说明　　nginx搭建流媒体服务需要用到 nginx-rtmp-module 模块
具体操作步骤：
安装nginx（1）下载第三方扩展模块nginx-rtmp-module**[root@m
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-01-21
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Cheney
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/linux/">
                        <span class="chip bg-color">linux</span>
                    </a>
                    
                    <a href="/tags/nginx/">
                        <span class="chip bg-color">nginx</span>
                    </a>
                    
                    <a href="/tags/rtmp/">
                        <span class="chip bg-color">rtmp</span>
                    </a>
                    
                    <a href="/tags/ffmpeg/">
                        <span class="chip bg-color">ffmpeg</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/01/20/install-rabbitmq/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/13.jpg" class="responsive-img" alt="install rabbitmq">
                        
                        <span class="card-title">install rabbitmq</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            已安装rabbitmq-server-3.8.5为例，具体环境：


环境
版本



OS
linux7


rabbitmq
rabbitmq-server-3.8.5-1.el7.noarch.rpm


erlang
erlang-
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-01-20
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/rabbitMQ/" class="post-category">
                                    rabbitMQ
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/linux/">
                        <span class="chip bg-color">linux</span>
                    </a>
                    
                    <a href="/tags/rabbitMQ/">
                        <span class="chip bg-color">rabbitMQ</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('4'),
            headingSelector: 'h2, h3, h4, h5'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4, h5').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="/about" target="_blank">Cheney</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/chenguoo" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:2270292886@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2270292886" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2270292886" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true,"react":{"opacity":0.7}}});</script></body>

</html>
